---

- name: log into private registry and force re-authorization
  docker_login:
#    registry: "{{ dockerhub_app }}"
    username: "deusdimitrius"
    password: "r123"
#    reauthorize: yes

- name: pull image from Dockerhub
  docker_image:
  name: "{{ dockerhub_app }}"

- name: create docker network
  shell: docker network create dnet

#- name add container to network
#  shell: docker run -d -p 5000:5000 --network=dnet  --name=flask {{ dockerhub_app }}

#- name: Start a container 
#  docker_container:
#    name: agent
#    image: hello-world

- name: create a network
#  become: true
#  become_method: sudo
  docker_network:
    name: network

#- name: add container 
#  docker_container:
#    name: flaskapp
#    hostname: flaskapp
#    state: started
#    image: "deusdimitrius/epam_exam:flaskapp"
#    pull: true
#    exposed_ports:
#      - 5000
#    detach: true
#    networks:
#      - name: dnet
#        links: flaskapp
#  with_items: "dfnet"
